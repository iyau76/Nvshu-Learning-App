#:kivy 2.3.0

<Label>:
    font_name: 'NvshuFont'

<Button>:
    font_name: 'NvshuFont'
    background_color: (0.2, 0.2, 0.2, 1)
    background_normal: ''

<MenuScreen>:
    BoxLayout:
        orientation: 'vertical'
        padding: 40
        spacing: 20
        Label:
            text: 'å¥³ä¹¦å­¦ä¹  App \n ğ›†ğ›ˆ¬ğ›‰¬ğ›†“ğ›Š‰ğ›ˆ'
            font_name: 'NvshuFont'
            font_size: '36sp'
        Button:
            text: 'å­¦ä¹ \nğ›‰¬ğ›†“'
            font_size: '28sp'
            on_release: app.root.current = 'chapter'
        Button:
            text: 'æµ‹è¯•ï¼ˆå¼€å‘ä¸­ï¼‰\nğ›‹°ğ›ˆ(ğ›‡¶ğ›†ğ›ˆŒ)'
            font_size: '28sp'
            # on_release: app.root.current = 'testing' # å¾…å¼€å‘
        Button:
            text: 'è®¾ç½®\nğ›Š—ğ›‹”'
            font_size: '28sp'
            # å…³é”®ä¿®å¤ï¼šæ¢å¤æŒ‰é’®çš„ on_release äº‹ä»¶
            on_release: app.root.current = 'settings'
        Button:
            text: 'é€€å‡º\nğ›Š‡ğ›ˆš'
            font_size: '28sp'
            on_release: app.stop()

<ChapterScreen>:
    BoxLayout:
        orientation: 'vertical'
        padding: 20
        spacing: 40
        ScrollView:
            do_scroll_x: False
            BoxLayout:
                id: chapter_box
                orientation: 'vertical'
                size_hint_y: None
                height: self.minimum_height
        Button:
            text: "ä¸»èœå•\nğ›‹±ğ›ˆ ğ›ˆ"
            size_hint_y: None
            font_size: '24sp'
            line_height: 1.1
            height: "72dp"
            on_release: app.root.current = 'menu'

<LearningScreen>:
    BoxLayout:
        orientation: 'vertical'
        padding: 15
        spacing: 10
        BoxLayout:
            size_hint_y: None
            height: '40dp'
            Label:
                id: learned_label
                text: "æœ¬è½®å­¦ä¼š: 0/10"
                halign: 'left'
                text_size: self.size
            Button:
                id: menu_button
                text: "ä¸»èœå•\nğ›‹±ğ›ˆ ğ›ˆ"
                size_hint_x: None
                width: '100dp'
                on_release: app.root.current = "menu"
        BoxLayout:
            id: content_area
            orientation: 'vertical'
            spacing: 10
            size_hint_y: 1
        ScrollView:
            id: explanation_scroll
            size_hint_y: 0.3
            height: 0
            opacity: 0
            do_scroll_x: False
            Label:
                id: explanation_label
                text: ""
                size_hint_y: None
                height: self.texture_size[1]
                text_size: self.width, None
                markup: True
                padding: (10, 10)
        BoxLayout:
            id: nav_bar
            size_hint_y: None
            height: '50dp'
            spacing: 15
            Button:
                id: prev_button
                text: "ä¸Šä¸€é¢˜"
                on_release: root.prev_question()
                font_size: '20sp'
            Button:
                id: next_button
                text: "ä¸‹ä¸€é¢˜"
                font_size: '20sp'
                on_release: root.next_question()

<ReviewScreen>:
    BoxLayout:
        orientation: 'vertical'
        padding: 10
        spacing: 10
        Label:
            text: "å¤ç›˜æœ¬æ¬¡å­¦ä¹     ğ›‹·ğ›‹…ğ›‡…ğ›‡ ğ›‰¬ğ›†“"
            font_size: '24sp'
            size_hint_y: None
            height: '40dp'
        ScrollView:
            Label:
                id: review_content_label
                font_name: 'NvshuFont'
                text: ''
                size_hint_y: None
                height: self.texture_size[1]
                text_size: self.width - 20, None
                padding: (10, 10)
                markup: True
        Button:
            text: "ä¸»èœå•\nğ›‹±ğ›ˆ ğ›ˆ"
            font_size: '24sp'
            size_hint_y: None
            height: '72dp'

            on_release: root.back_to_menu()

<SettingsScreen>:
    BoxLayout:
        orientation: 'vertical'
        padding: 20
        spacing: 20

        Label:
            text: 'åº”ç”¨è®¾ç½®'
            font_size: '28sp'
            size_hint_y: None
            height: '40dp'

        # --- æ¯è½®é¢˜é‡è®¾ç½® ---
        BoxLayout:
            orientation: 'vertical'
            size_hint_y: None
            height: '120dp'
            spacing: 10
            Label:
                text: 'ä¿®æ”¹æ¯è½®å­¦ä¹ /å¤ä¹ çš„é¢˜ç›®æ•°é‡ (å»ºè®®5-20)'
                font_size: '18sp'
            TextInput:
                id: questions_input
                text: root.questions_per_session_text
                font_name: 'NvshuFont'
                font_size: '20sp'
                halign: 'center'
                input_filter: 'int'
                multiline: False
                size_hint_y: None
                height: '48dp'
            Button:
                text: 'ä¿å­˜é¢˜é‡è®¾ç½®'
                font_size: '20sp'
                on_release: root.save_settings()
                size_hint_y: None
                height: '48dp'

        # --- é‡ç½®è¿›åº¦ ---
        Button:
            text: 'é‡ç½®ç« èŠ‚å­¦ä¹ è¿›åº¦'
            font_size: '20sp'
            on_release: root.show_reset_options()
            size_hint_y: None
            height: '48dp'

        # --- å ä½ç¬¦ï¼Œè®©è¿”å›æŒ‰é’®é åº• ---
        Widget:

        # --- è¿”å›ä¸»èœå• ---
        Button:
            text: 'ä¸»èœå•'
            on_release: app.root.current = 'menu'
            font_size: '24sp'
            size_hint_y: None
            height: '48dp'
